=== Simple Schema Backend
--- input:Document
\standalone(\SchemaDef)

\SchemaDef(root=\Sequence(\Section)):
  Section = \Record:
    title: \Text
    content: \Concat(\Subsection) {primary}:1>
  \end(Record)

  Subsection = \Record:
    title: \Text
    content: \Text {primary}:2>
  \end(Record)
:backends:<val \doc>
  markdown = \backend:
  :funcs:
    content = \matcher:
    :(\Text):<val \content>
      \content
    :(\Section):<val \sec>
      \# \sec::title

      \content(\sec::content)
      \
    :(\Subsection):<val \sub>
      \#\# \sub::title

      \content(\sub::content)
      \
    \end(matcher)
  :body:
    \Output(\doc::name.md):
      \content(\doc::root)
    \end(Output)
  \end(backend)
\end(SchemaDef)
--- input
\standalone(schema=\import(Document))

\Section(First Section)

\Subsection(Foo)

Lorem ipsum

\Section(Second Section)

\Subsection(Bar)

Dolor

Sit amet
--- output:input.md
# First Section

## Foo

Lorem ipsum

# Second Section

## Bar

Dolor

Sit amet

