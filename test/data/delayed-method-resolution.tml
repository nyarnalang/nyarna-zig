=== Delayed method resolution
--- input
\declare:
  foo = \record:
    a, b: \Raw
  \end(record)
\end(declare)

\declare(\foo):
  double = \func:
  :body:
    \this::concat()\this::concat()
  \end(func)
  concat = \func:
  :body:
    \this::a\this::b
  \end(func)
\end(declare)

\foo(foo, bar)::double()
--- ast
+CALL
  +TARGET
    =SYMREF .doc.double
  -TARGET
  +PROTO "this"
    +CALL
      +TARGET
        =SYMREF .doc.foo
      -TARGET
      +PROTO "a"
        =LIT TEXT "foo"
      -PROTO
      +PROTO "b"
        =LIT TEXT "bar"
      -PROTO
    -CALL
  -PROTO
-CALL
--- document
=RAW Raw "foobarfoobar"