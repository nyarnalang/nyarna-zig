=== Delayed method resolution
--- input
\declare:
  Foo = \Record:
    a, b: \Raw
  \end(Record)
\end(declare)

\declare(\Foo):
  double = \func:
  :body:
    \this::concat()\this::concat()
  \end(func)
  concat = \func:
  :body:
    \this::a\this::b
  \end(func)
\end(declare)

\Foo(foo, bar)::double()
--- expr
+CALL
  =FUNCREF .doc.document.double
  >ARG this
  +CALL
    =TYPE .doc.document.Foo
    >ARG a
    =TEXT literal "foo"
    >ARG b
    =TEXT literal "bar"
  -CALL
-CALL
--- document
=RAW Raw "foobarfoobar"